name: Android Feature

on:
    push:
        branches:
            - '*'
            - 'feature/*'
            - '!main'

jobs:

    compile:
        name: Compile
        runs-on: ubuntu-18.04

        steps:
            -   uses: actions/checkout@v1
            -   name: set up JDK 1.8
                uses: actions/setup-java@v1
                with:
                    java-version: 1.8
            -   name: Compile
                run: bash ./gradlew compileDebugSources compileDebugUnitTestSources -PdisablePreDex --quiet

    lint:
        name: Lint
        runs-on: ubuntu-18.04

        steps:
            -   uses: actions/checkout@v1
            -   name: set up JDK 1.8
                uses: actions/setup-java@v1
                with:
                    java-version: 1.8
            -   name: Lint
                run: bash ./gradlew app:lintDebug ktlintCheck -PdisablePreDex --quiet

    test:
        name: Unit Tests
        runs-on: ubuntu-18.04

        steps:
            -   uses: actions/checkout@v1
            -   name: set up JDK 1.8
                uses: actions/setup-java@v1
                with:
                    java-version: 1.8
            -   name: Unit tests
                run: bash ./gradlew test --stacktrace
